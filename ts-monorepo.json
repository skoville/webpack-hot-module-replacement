{
    "packageRoot": "packages",
    "ttypescript": true,
    "cleanBeforeCompile": false,
    "baseConfigs": {
        "tsconfig.json": {
            "compilerOptions": {
                "module": "commonjs", /* need to use this if targetting es6. Not needed when targetting es5 */
                "target": "es6",

                /* Type Definitions */
                "lib": ["esnext"],
                "types": ["ts-nameof"],

                /* Code Quality */
                "forceConsistentCasingInFileNames": true,
                "noImplicitReturns": true,
                "noUnusedLocals": true,
                "noUnusedParameters": true,
                "strict": true, // noImplicitAny noImplicitThis alwaysStrict strictBindCallApply strictFunctionTypes strictPropertyInitialization strictNullChecks
                "stripInternal": true,

                /* Compiler input output locations */
                "rootDir": "./source",
                "outDir": "./distribution",

                /* https://github.com/cevek/ttypescript */
                "plugins": [
                    {
                        "transform": "ts-nameof",
                        "type": "raw"
                    }
                ]
                /** Look into the following:
                    allowSyntheticDefaultImports
                    "diagnostics"
                    downlevelIteration
                    emitDecoratorMetadata
                    esModuleInterop
                    experimentalDecorators
                    extendedDiagnostics <-- doesn't seem to be in the tsconfig.json schema
                    importHelpers
                    isolatedModules
                    listEmittedFiles
                    listFiles
                    module: ESNext
                    moduleResolution
                    noEmitOnError
                    noErrorTruncation
                    pretty
                    removeComments
                    resolveJsonModule
                    sourceMap
                    sourceRoot
                    stripInternal // Could be a good way to hide internal details.
                    traceResolution
                */
            },
            "include": [
                "source/**/*"
            ]
        },
        "package.json": {
            "author": "Alexander Leung",
            "license": "MIT",
            "repository": {
                "type": "git",
                "url": "git+https://github.com/skoville/webpack-hot-module-replacement.git"
            },
            "devDependencies":[
                "ts-nameof"
            ]
        }
    },
    "packages": {
        "@isomorphic-typescript/fs-async-nodejs": {
            "publishDistributionFolder": false,
            "configs": {
                "package.json":{
                    "files": ["distribution"],
                    "main": "./distribution/package.js",
                    "dependencies": [
                        "@types/node"
                    ]
                },
                "tsconfig.json":{
                    "compilerOptions": {
                        "types": ["node"]
                    }
                }
            }
        },
        // TODO: should we have a package "webpack-hmr-server-node-default-event-observer" or should we have the dashboard use the public API?
        //       Probably the latter I think. In that case it could be "webpack-hmr-dashboard-client". It can take in the socket-io accessor or any other accessor and JUST WORK
        "@skoville/webpack-hmr-client-universal-hot-runtime": {
            "publishDistributionFolder": false,
            "configs": {
                "package.json": {
                    "files": ["distribution"],
                    "main": "./distribution/package.js",
                    "devDependencies": [
                        "@types/webpack-env"
                    ],
                    "dependencies": [
                        "@skoville/webpack-hmr-shared-universal-utilities"
                    ]
                },
                "tsconfig.json": {
                    "compilerOptions": {
                        "types": ["webpack-env"]
                    }
                }
            }
        },
        "@skoville/webpack-hmr-client-universal-default-socket-io-accessor": {
            "publishDistributionFolder": false,
            "configs": {
                "package.json": {
                    "files": ["distribution"],
                    "main": "./distribution/package.js",
                    "dependencies": [
                        "socket.io-client",
                        "@skoville/webpack-hmr-shared-universal-utilities"
                    ],
                    "devDependencies": [
                        "@types/socket.io-client"
                    ]
                },
                "tsconfig.json": {}
            }
        },
        "@skoville/webpack-hmr-client-web-customizable": {
            "publishDistributionFolder": false,
            "configs": {
                "package.json": {
                    "files": ["distribution"],
                    "main": "./distribution/package.js",
                    "dependencies": [
                        "@skoville/webpack-hmr-client-universal-hot-runtime",
                        "@skoville/webpack-hmr-shared-universal-utilities"
                    ]
                },
                "tsconfig.json": {
                    "compilerOptions": {
                        "lib": ["dom"]
                    }
                }
            }
        },
        "@skoville/webpack-hmr-client-web-default": {
            "publishDistributionFolder": true,
            "configs": {
                "package.json": {
                    "files": ["distribution"],
                    "dependencies": [
                        "@skoville/webpack-hmr-client-web-customizable",
                        "@skoville/webpack-hmr-client-universal-default-socket-io-accessor"
                    ]
                },
                "tsconfig.json": {
                    "compilerOptions": {
                        "lib": ["dom"]
                    }
                }
            }
        },
        "@skoville/webpack-hmr-client-node-customizable": {
            "publishDistributionFolder": false,
            "configs": {
                "package.json": {
                    "files": ["distribution"],
                    "main": "./distribution/package.js",
                    "dependencies": [
                        "@skoville/webpack-hmr-client-universal-hot-runtime",
                        "@skoville/webpack-hmr-shared-universal-utilities",
                        "ansicolor"
                    ],
                    "devDependencies": [
                        "@types/node",
                        "@types/webpack-env"
                    ]
                },
                "tsconfig.json": {
                    "compilerOptions": {
                        "types": ["node", "webpack-env"]
                    }
                }
            }
        },
        "@skoville/webpack-hmr-client-node-default": {
            "publishDistributionFolder": true,
            "configs": {
                "package.json": {
                    "files": ["distribution"],
                    "dependencies": [
                        "@skoville/webpack-hmr-client-node-customizable",
                        "@skoville/webpack-hmr-client-universal-default-socket-io-accessor"
                    ]
                },
                "tsconfig.json": {}
            }
        },
        "@skoville/webpack-hmr-shared-universal-utilities": {
            "publishDistributionFolder": false,
            "configs": {
                "package.json":{
                    "files": ["distribution"],
                    "main": "./distribution/package.js",
                    "dependencies": [
                        "ansicolor"
                    ]
                },
                "tsconfig.json": {}
            }
        },
        "@skoville/webpack-hmr-server-node-customizable": {
            "publishDistributionFolder": false,
            "configs": {
                "package.json": {
                    "files": ["distribution"],
                    "main": "./distribution/package.js",
                    "dependencies":[
                        "memory-fs",
                        "uuid",
                        "ansicolor",
                        "webpack-sources",
                        "@types/webpack",
                        "@skoville/webpack-hmr-shared-universal-utilities"
                    ],
                    "devDependencies": [
                        "@types/node",
                        "@types/uuid",
                        "@types/webpack-env",
                        "@types/memory-fs"
                    ],
                    "peerDependencies": [
                        "webpack"
                    ]
                },
                "tsconfig.json": {
                    "compilerOptions": {
                        "types":["node", "webpack-env"]
                    }
                }
            }
        },
        "@skoville/webpack-hmr-server-node-default": {
            "publishDistributionFolder": false,
            "configs": {
                "package.json": {
                    "files": ["distribution"],
                    "main": "./distribution/package.js",
                    "dependencies": [
                        "@skoville/webpack-hmr-server-node-customizable",
                        "@types/webpack",
                        "express",
                        "mime",
                        "socket.io"
                    ],
                    "devDependencies": [
                        "@types/node",
                        "@types/mime",
                        "@types/express",
                        "@types/socket.io"
                    ],
                    "peerDependencies": [
                        "webpack"
                    ]
                },
                "tsconfig.json": {
                    "compilerOptions": {
                        "types": ["node"]
                    }
                }
            }
        },

        // Integration tests

        "@skoville-integration-testing/default-test": {
            "publishDistributionFolder": false,
            "configs":{
                "package.json":{
                    "dependencies":[
                        "@skoville/webpack-hmr-server-node-default",
                        "@skoville/webpack-hmr-client-node-default",
                        "@skoville/webpack-hmr-client-web-default",
                        "chokidar",
                        "ansicolor",
                        "webpack",
                        "@isomorphic-typescript/fs-async-nodejs",
                        "source-map-support",
                        "ts-loader",
                        "express"
                    ],
                    "devDependencies": [
                        "@types/node",
                        "@types/webpack",
                        "@types/webpack-env",
                        "@types/express"
                    ],
                    "scripts": {
                        "start": "node --preserve-symlinks -r source-map-support/register ./distribution/main.js"
                        //"test": "skoville-webpack-node-run -u http://localhost:8080/server.js"
                    },
                    "resolutions": {
                        "@types/node": "^12.6.8"
                    }
                },
                "tsconfig.json":{
                    "compilerOptions": {
                        "types":["node", "webpack-env"]
                    }
                }
            }
        }
    },
    "version": "0.0.0"
}